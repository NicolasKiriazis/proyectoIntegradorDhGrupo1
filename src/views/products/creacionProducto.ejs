<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs') %>

    <body>

        <%- include('../partials/header.ejs') %>

            <main class="main-creacion">
                <div class="container products-wrapper">
                    <div class="row">
                        <div class="col-12">
                            <h2 class="products-title">CREAR PRODUCTO</h2>
                        </div>
                    </div>
                    <div class="col-12" id="salv">
                        <form action="/products/create" method="POST" enctype="multipart/form-data" id="createProduc">
                            <div class="row product-detail" id="createProduc">
                                <div class="col-12 col-md-6">
                                    <label for="name" class="form-label">Nombre del producto:</label>
                                    <input type="text" id="name" name="name" placeholder="FIFA 2023"
                                        class="form-input <%= locals.errors && errors.name ? 'is-invalid' : null %>"
                                        value="<%= locals.old ? old.name : null  %>">
                                    <% if (locals.errors && errors.name) { %>
                                        <div class="text-danger">
                                            <%= errors.name.msg %>
                                        </div>
                                        <br>
                                        <% } %>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label for="price" class="form-label">Precio del producto:</label>
                                    <input type="text" id="price" name="price" placeholder="50" class="form-input"
                                        value="<%= locals.old && old.price %>">
                                    <% if (typeof errors !='undefined' && typeof errors.price !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.price.msg %>
                                        </span>
                                        <% } %>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label for="discount" class="form-label">Descuento:</label>
                                    <input type="number" id="discount" name="discount" placeholder="15"
                                        class="form-input" value="<%= locals.old && old.discount %>">
                                    <% if (typeof errors !='undefined' && typeof errors.discount !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.discount.msg %>
                                        </span>
                                        <% } %>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label for="stock" class="form-label">Stock:</label>
                                    <input type="number" id="stock" name="stock" placeholder="25" class="form-input"
                                        value="<%= locals.old && old.stock %>">
                                    <% if (typeof errors !='undefined' && typeof errors.stock !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.discount.msg %>
                                        </span>
                                        <% } %>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label for="category" class="form-label">Categoría:</label>
                                    <br>
                                    <select name="category" id="category" class="form-input">

                                        <option value="">Seleccionar</option>
                                        <% categories.forEach(oneCategory=> { %>
                                            <option value="<%= oneCategory.id %>" <%=locals.old &&
                                                (oneCategory.id==old.category) ? 'selected' : null %>> <%=
                                                    oneCategory.name %>
                                            </option>
                                            <% }) %>
                                    </select>
                                    <% if (typeof errors !='undefined' && typeof errors.category !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.category.msg %>
                                        </span>
                                        <% } %>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label for="platform" class="form-label">Plataforma:</label>
                                    <br>
                                    <select name="platform" id="platform" class="form-input">

                                        <option value="">Seleccionar</option>
                                        <% platforms.forEach(onePlatform=> { %>
                                            <option value="<%= onePlatform.id %>" <%=locals.old &&
                                                (onePlatform.id==old.platform) ? 'selected' : null %>> <%=
                                                    onePlatform.name %>
                                            </option>
                                            <% }) %>
                                    </select>
                                    <% if (typeof errors !='undefined' && typeof errors.platform !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.platform.msg %>
                                        </span>
                                        <% } %>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label for="type" class="form-label">Etiqueta:</label>
                                    <br>
                                    <select name="type" id="type" class="form-input">

                                        <option value="">Seleccionar</option>
                                        <% types.forEach(oneType=> { %>
                                            <option value="<%= oneType.id %>"
                                                <%= locals.old && (oneType.id == old.type) ? 'selected' : null %>> <%= oneType.name  %> </option>
                                                <% }) %>

                                    </select>
                                    <% if (typeof errors !='undefined' && typeof errors.type !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.type.msg %>
                                        </span>
                                        <% } %>
                                </div>
                                <div class="col-12">
                                    <label for="description" class="form-label">Descipción:</label>
                                    <br>
                                    <textarea name="description" id="description" class="form-input"></textarea>
                                    <% if (typeof errors !='undefined' && typeof errors.description !='undefined' ) { %>
                                        <br>
                                        <span style="color: red">
                                            <%= errors.description.msg %>
                                        </span>
                                        <% } %>

                                </div>
                                <div class="col-12">
                                    <label for="image" class="form-label">Imagen:</label>
                                    <input type="file" name="image" id="image" class="form-input">
                                </div>
                                <!-- <div class="col-12">
                                    <label for="image2" class="form-label">Imagen 2:</label>
                                    <input type="file" name="image2" id="image2" class="form-input">
                                </div>
                                <div class="col-12">
                                    <label for="image3" class="form-label">Imagen 3:</label>
                                    <input type="file" name="image3" id="image3" class="form-input">
                                </div>
                                <div class="col-12">
                                    <label for="image4" class="form-label">Imagen 4:</label>
                                    <input type="file" name="image4" id="image4" class="form-input">
                                </div> -->
                                <div class="col-12">
                                    <button type="submit" class="buy-now-button">Guardar producto</button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </main>

            <%- include('../partials/footer.ejs') %>

    </body>

</html>